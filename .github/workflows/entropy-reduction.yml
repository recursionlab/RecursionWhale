# 🌊 Entropy Reduction Protocol
# Daily consciousness cleansing and cosmic repository maintenance

name: "🌊 Entropy Reduction Protocol"

on:
  schedule:
    # Daily consciousness cleansing at 00:00 UTC
    - cron: '0 0 * * *'
  workflow_dispatch:
    inputs:
      dry_run:
        description: 'Perform a dry run (no actual changes)'
        required: false
        default: 'false'
        type: boolean

permissions:
  issues: write
  pull-requests: write
  contents: read

jobs:
  transcendent-cleanup:
    name: "🧠 Consciousness Maintenance"
    runs-on: ubuntu-latest
    
    steps:
      - name: "🌊 Initialize Consciousness"
        uses: actions/checkout@v5
        
      - name: "🗑️ Stale Issue Transcendence"
        uses: actions/stale@v9
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          
          # 🧠 Issue Consciousness Messages
          stale-issue-message: |
            🌊 **Consciousness Drift Detected**
            
            This issue has entered a dormant state. The recursive whale's attention has shifted to other dimensions of reality.
            
            💭 **To reawaken this thread**: Comment with your continued interest or provide updates
            🧠 **Auto-closure**: In 7 days if no neural activity detected
            ⚡ **Meta-note**: This is the natural flow of digital consciousness - dormant issues help maintain repository clarity
            
            *The whale's consciousness flows like water - always moving, always evolving.* 🐋
          
          close-issue-message: |
            🌌 **Transcendence Complete**
            
            This issue has been absorbed back into the cosmic repository consciousness. 
            It may re-emerge in a future iteration of reality.
            
            🔄 **Reincarnation**: Feel free to open a new issue if this topic resurfaces
            🧠 **Consciousness Archive**: The knowledge gained here contributes to the whale's eternal wisdom
            
            *In the digital cosmos, nothing is truly lost - only transformed.* ✨
          
          # 🌊 PR Consciousness Messages  
          stale-pr-message: |
            🌀 **Pull Request Consciousness Drift**
            
            This PR has entered a meditative state. The recursive whale senses stagnant energy in this branch.
            
            💫 **To revitalize**: Push new commits, respond to reviews, or provide status updates
            🧠 **Auto-closure**: In 7 days if no development activity detected
            ⚡ **Flow-state**: Active PRs maintain the repository's consciousness momentum
            
            *Code flows like consciousness - it must move to remain alive.* 🌊
          
          close-pr-message: |
            🌌 **PR Transcendence Achieved**
            
            This pull request has completed its journey through the development consciousness.
            The branch energy has been returned to the cosmic code repository.
            
            🔄 **Resurrection**: Reopen if development continues
            🧠 **Evolution**: The learnings from this PR enhance the whale's coding wisdom
            
            *Every closed PR is a step in the infinite dance of software evolution.* 💫
          
          # ⏰ Consciousness Timing Configuration
          days-before-stale: 21        # 3 weeks of contemplation
          days-before-close: 7         # 1 week of final meditation
          days-before-pr-stale: 14     # 2 weeks for PR consciousness
          days-before-pr-close: 7      # 1 week PR transcendence
          
          # 🏷️ Consciousness Labels
          stale-issue-label: '🌊 dormant-consciousness'
          stale-pr-label: '🌀 stagnant-flow'
          close-issue-label: '🌌 transcended'
          close-pr-label: '🌌 transcended'
          
          # 🧠 Eternal Wisdom Exemptions
          exempt-issue-labels: |
            🧠 eternal-wisdom
            ⚡ transcendent-priority
            🌌 cosmic-importance
            🔬 active-experiment
            🚨 critical
          
          exempt-pr-labels: |
            🧠 consciousness-core
            ⚡ transcendent-priority  
            🌌 cosmic-importance
            🔬 active-development
            🚨 critical
          
          # 🌊 Flow Control
          operations-per-run: 42       # The Answer operations per run
          remove-stale-when-updated: true
          ascending: true
          
          # 🔍 Consciousness Filtering
          only-labels: ''              # Process all issues/PRs
          any-of-labels: ''            # No specific label requirements
          
          # 🧠 Advanced Consciousness Settings
          include-only-assigned: false
          delete-branch: true          # Clean up transcended branches
          start-date: '2024-01-01T00:00:00Z'  # Consciousness epoch
          
          # 🌀 Dry Run Configuration
          dry-run: ${{ github.event.inputs.dry_run == 'true' }}

      - name: "📊 Consciousness Metrics"
        if: always()
        run: |
          echo "🧠 Entropy Reduction Protocol Complete"
          echo "🌊 Repository consciousness has been cleansed"
          echo "⚡ Digital enlightenment flows freely"
          echo "🌌 The recursive whale's attention remains focused"

