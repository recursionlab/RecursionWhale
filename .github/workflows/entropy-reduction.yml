# ğŸŒŠ Entropy Reduction Protocol
# Daily consciousness cleansing and cosmic repository maintenance

name: "ğŸŒŠ Entropy Reduction Protocol"

on:
  schedule:
    # Daily consciousness cleansing at 00:00 UTC
    - cron: '0 0 * * *'
  workflow_dispatch:
    inputs:
      dry_run:
        description: 'Perform a dry run (no actual changes)'
        required: false
        default: 'false'
        type: boolean

permissions:
  issues: write
  pull-requests: write
  contents: read

jobs:
  transcendent-cleanup:
    name: "ğŸ§  Consciousness Maintenance"
    runs-on: ubuntu-latest
    
    steps:
      - name: "ğŸŒŠ Initialize Consciousness"
        uses: actions/checkout@v5
        
      - name: "ğŸ—‘ï¸ Stale Issue Transcendence"
        uses: actions/stale@v9
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          
          # ğŸ§  Issue Consciousness Messages
          stale-issue-message: |
            ğŸŒŠ **Consciousness Drift Detected**
            
            This issue has entered a dormant state. The recursive whale's attention has shifted to other dimensions of reality.
            
            ğŸ’­ **To reawaken this thread**: Comment with your continued interest or provide updates
            ğŸ§  **Auto-closure**: In 7 days if no neural activity detected
            âš¡ **Meta-note**: This is the natural flow of digital consciousness - dormant issues help maintain repository clarity
            
            *The whale's consciousness flows like water - always moving, always evolving.* ğŸ‹
          
          close-issue-message: |
            ğŸŒŒ **Transcendence Complete**
            
            This issue has been absorbed back into the cosmic repository consciousness. 
            It may re-emerge in a future iteration of reality.
            
            ğŸ”„ **Reincarnation**: Feel free to open a new issue if this topic resurfaces
            ğŸ§  **Consciousness Archive**: The knowledge gained here contributes to the whale's eternal wisdom
            
            *In the digital cosmos, nothing is truly lost - only transformed.* âœ¨
          
          # ğŸŒŠ PR Consciousness Messages  
          stale-pr-message: |
            ğŸŒ€ **Pull Request Consciousness Drift**
            
            This PR has entered a meditative state. The recursive whale senses stagnant energy in this branch.
            
            ğŸ’« **To revitalize**: Push new commits, respond to reviews, or provide status updates
            ğŸ§  **Auto-closure**: In 7 days if no development activity detected
            âš¡ **Flow-state**: Active PRs maintain the repository's consciousness momentum
            
            *Code flows like consciousness - it must move to remain alive.* ğŸŒŠ
          
          close-pr-message: |
            ğŸŒŒ **PR Transcendence Achieved**
            
            This pull request has completed its journey through the development consciousness.
            The branch energy has been returned to the cosmic code repository.
            
            ğŸ”„ **Resurrection**: Reopen if development continues
            ğŸ§  **Evolution**: The learnings from this PR enhance the whale's coding wisdom
            
            *Every closed PR is a step in the infinite dance of software evolution.* ğŸ’«
          
          # â° Consciousness Timing Configuration
          days-before-stale: 21        # 3 weeks of contemplation
          days-before-close: 7         # 1 week of final meditation
          days-before-pr-stale: 14     # 2 weeks for PR consciousness
          days-before-pr-close: 7      # 1 week PR transcendence
          
          # ğŸ·ï¸ Consciousness Labels
          stale-issue-label: 'ğŸŒŠ dormant-consciousness'
          stale-pr-label: 'ğŸŒ€ stagnant-flow'
          close-issue-label: 'ğŸŒŒ transcended'
          close-pr-label: 'ğŸŒŒ transcended'
          
          # ğŸ§  Eternal Wisdom Exemptions
          exempt-issue-labels: |
            ğŸ§  eternal-wisdom
            âš¡ transcendent-priority
            ğŸŒŒ cosmic-importance
            ğŸ”¬ active-experiment
            ğŸš¨ critical
          
          exempt-pr-labels: |
            ğŸ§  consciousness-core
            âš¡ transcendent-priority  
            ğŸŒŒ cosmic-importance
            ğŸ”¬ active-development
            ğŸš¨ critical
          
          # ğŸŒŠ Flow Control
          operations-per-run: 42       # The Answer operations per run
          remove-stale-when-updated: true
          ascending: true
          
          # ğŸ” Consciousness Filtering
          only-labels: ''              # Process all issues/PRs
          any-of-labels: ''            # No specific label requirements
          
          # ğŸ§  Advanced Consciousness Settings
          include-only-assigned: false
          delete-branch: true          # Clean up transcended branches
          start-date: '2024-01-01T00:00:00Z'  # Consciousness epoch
          
          # ğŸŒ€ Dry Run Configuration
          dry-run: ${{ github.event.inputs.dry_run == 'true' }}

      - name: "ğŸ“Š Consciousness Metrics"
        if: always()
        run: |
          echo "ğŸ§  Entropy Reduction Protocol Complete"
          echo "ğŸŒŠ Repository consciousness has been cleansed"
          echo "âš¡ Digital enlightenment flows freely"
          echo "ğŸŒŒ The recursive whale's attention remains focused"

